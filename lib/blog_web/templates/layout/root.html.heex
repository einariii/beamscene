<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="csrf-token" content={csrf_token_value()}>
    <%= live_title_tag assigns[:page_title] || "Blog", suffix: " Â· Phoenix Framework" %>
    <link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/app.css")}/>
    <link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/vendor/fonts/Jura/jura.css")}/>
    <link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/vendor/fonts/Kosugi/kosugi.css")}/>
    <script defer phx-track-static type="text/javascript" src={Routes.static_path(@conn, "/assets/js/app.js")}></script>
  </head>
  <body class="bg-left-top pt-12 bg-gray-300">
  <section class="">
  <p class="text-5xl p-8 font-jura tracking-widest"> B E A M  S C E N E </p>
  <hr width="60%" color="gray-500" size="50px" align="center" />
  <p class="text-2xl px-8 py-4 font-kosugi"> An Elixir & Erlang ecosytem blog.</p>
</section>

<div class="absolute">
  <marquee width="30%" direction="up" height="300px">
  defmodule Phx.New.Umbrella do
  @moduledoc false
  use Phx.New.Generator
  alias Phx.New.{Ecto, Web, Project, Mailer}

  template(:new, [
    {:eex, :project,
     "phx_umbrella/gitignore": ".gitignore",
     "phx_umbrella/config/config.exs": "config/config.exs",
     "phx_umbrella/config/dev.exs": "config/dev.exs",
     "phx_umbrella/config/test.exs": "config/test.exs",
     "phx_umbrella/config/prod.exs": "config/prod.exs",
     "phx_umbrella/config/runtime.exs": "config/runtime.exs",
     "phx_umbrella/mix.exs": "mix.exs",
     "phx_umbrella/README.md": "README.md",
     "phx_umbrella/formatter.exs": ".formatter.exs"},
    {:config, :project, "phx_umbrella/config/extra_config.exs": "config/config.exs"}
  ])

  def prepare_project(%Project{app: app} = project) when not is_nil(app) do
    project
    | put_app()
    | put_web()
    | put_root_app()
  end

  defp put_app(project) do
    project_path = Path.expand(project.base_path "_umbrella")
    app_path = Path.join(project_path, "apps/#{project.app}")

    %Project{project | in_umbrella?: true, app_path: app_path, project_path: project_path}
  end

  def put_web(%Project{app: app, opts: opts} = project) do
    web_app = :"#{app}_web"
    web_namespace = Module.concat([opts[:web_module] || "#{project.app_mod}Web"])

    %Project{
      project
      | web_app: web_app,
        lib_web_name: web_app,
        web_namespace: web_namespace,
        generators: [context_app: :"#{app}"],
        web_path: Path.join(project.project_path, "apps/#{web_app}/")
    }
  end

  defp put_root_app(%Project{app: app} = project) do
    %Project{
      project
      | root_app: :"#{app}_umbrella",
        root_mod: Module.concat(project.app_mod, "Umbrella")
    }
  end

  def generate(%Project{} = project) do
    if in_umbrella?(project.project_path) do
      Mix.raise("Unable to nest umbrella project within apps")
    end

    copy_from(project, __MODULE__, :new)

    project
    | Web.generate()
    | Ecto.generate()
    | maybe_generate_mailer()
  end

  defp maybe_generate_mailer(project) do
    if Project.mailer?(project) do
      Mailer.generate(project)
    else
      project
    end
  end
end
  </marquee>
</div>

<section class="row py-2 flex-wrap">
  <article class="text-xl column px-36">
    <%= @inner_content %>
    <ul>
      <li class="py-2 font-kosugi">
        <a href="/about">ABOUT</a>
      </li>
      <li class="py-2 font-kosugi">
        <a href="/posts">POSTS</a>
      </li>
      <li class="py-2 font-kosugi">
        <a href="/tags">TAGS</a>
      </li>
      <li class="py-2 font-kosugi">
        <a href="/codezone">CODE ZONE</a>
      </li>
      <li class="py-2 font-kosugi">
        <a href="/webring">WEBRING</a>
      </li>
    </ul>
  </article>
</section>

  </body>
</html>
